
> vinculotea@1.0.0 test
> vitest run --no-watch


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0[39m

 [32mâœ“[39m test/security.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 37[2mms[22m[39m
[90mstdout[2m | test/others.test.ts[2m > [22m[2mNotes and User Management Services[2m > [22m[2mUser Service[2m > [22m[2mshould create a user (profile + auth link)
[22m[39mðŸ“ Criando perfil prÃ©vio na tabela Usuarios (Role: Profissional)...

[90mstdout[2m | test/others.test.ts[2m > [22m[2mNotes and User Management Services[2m > [22m[2mUser Service[2m > [22m[2mshould create a user (profile + auth link)
[22m[39mâœ… Perfil prÃ©vio criado. Iniciando Auth...

[90mstdout[2m | test/others.test.ts[2m > [22m[2mNotes and User Management Services[2m > [22m[2mUser Service[2m > [22m[2mshould create a user (profile + auth link)
[22m[39mâœ… Conta Auth criada. UID: new-auth-id
ðŸ”— Vinculando auth_uid ao perfil...

 [32mâœ“[39m test/others.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 41[2mms[22m[39m
[90mstdout[2m | test/integration.test.tsx[2m > [22m[2mVÃ­nculoTEAFull Integration Tests[2m > [22m[2mStudent Management UI[2m > [22m[2mopens the Student Registration Wizard
[22m[39mðŸ› ï¸ Ferramenta carregada!
ðŸ’¡ Para criar o primeiro admin, execute:
   criarPrimeiroAdmin()

 [32mâœ“[39m test/studentService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m test/management.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 33[2mms[22m[39m
[90mstderr[2m | test/integration.test.tsx[2m > [22m[2mVÃ­nculoTEAFull Integration Tests[2m > [22m[2mStudent Management UI[2m > [22m[2mopens the Student Registration Wizard
[22m[39mErro ao buscar alunos: TypeError: Cannot read properties of undefined (reading 'map')
    at fetchStudents [90m(/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/[39msrc/components/Dashboard/Students/StudentsView.tsx:68:52[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

[90mstderr[2m | test/integration.test.tsx[2m > [22m[2mVÃ­nculoTEAFull Integration Tests[2m > [22m[2mStudent Management UI[2m > [22m[2mopens the Student Registration Wizard
[22m[39mErro ao buscar dados iniciais: TypeError: Cannot read properties of undefined (reading 'map')
    at Object.getAll [90m(/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/[39msrc/lib/schoolsService.ts:31:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
    at async Promise.all (index 0)
    at fetchInitialData [90m(/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/[39msrc/components/Dashboard/Students/StudentsView.tsx:53:48[90m)[39m

[90mstderr[2m | test/integration.test.tsx[2m > [22m[2mVÃ­nculoTEAFull Integration Tests[2m > [22m[2mManagement & Settings Navigation[2m > [22m[2mnavigates through Management tabs (Schools, Teachers, Classes)
[22m[39mWarning: An update to SearchModal inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at SearchModal (/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/src/components/Dashboard/SearchModal.tsx:10:24)
    at div
    at Dashboard (/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/src/components/Dashboard/Dashboard.tsx:36:22)

 [32mâœ“[39m test/peisService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m test/peis_advanced.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 54[2mms[22m[39m
[90mstderr[2m | test/integration.test.tsx[2m > [22m[2mVÃ­nculoTEAFull Integration Tests[2m > [22m[2mGlobal Features[2m > [22m[2mshows and hides Notification center
[22m[39mError fetching stats: TypeError: __vite_ssr_import_3__.supabase.from(...).select(...).gte is not a function
    at fetchStats [90m(/home/stella_karolina/Documentos/vinculo/origin/vinculotea-2.0/[39msrc/components/Dashboard/Dashboard.tsx:113:12[90m)[39m

 [31mâ¯[39m test/integration.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 8375[2mms[22m[39m
[31m       [31mÃ—[31m opens the Student Registration Wizard[39m[33m 6068[2mms[22m[39m
       [33m[2mâœ“[22m[39m renders PEIs and allows opening the wizard [33m 815[2mms[22m[39m
       [33m[2mâœ“[22m[39m navigates through Management tabs (Schools, Teachers, Classes) [33m 717[2mms[22m[39m
       [33m[2mâœ“[22m[39m navigates to Settings and User Management [33m 507[2mms[22m[39m
       [32mâœ“[39m triggers Search Modal with Ctrl+K[32m 161[2mms[22m[39m
       [32mâœ“[39m shows and hides Notification center[32m 94[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m test/integration.test.tsx[2m > [22mVÃ­nculoTEAFull Integration Tests[2m > [22mStudent Management UI[2m > [22mopens the Student Registration Wizard
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m test/integration.test.tsx:[2m74:9[22m[39m
    [90m 72| [39m
    [90m 73| [39m    [34mdescribe[39m([32m'Student Management UI'[39m[33m,[39m () [33m=>[39m {
    [90m 74| [39m        [34mit[39m([32m'opens the Student Registration Wizard'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m   | [39m        [31m^[39m
    [90m 75| [39m            const { Dashboard } = await import('@/components/Dashboardâ€¦
    [90m 76| [39m            render(<Dashboard user={{ id: 'u123', email: 'admin@test.câ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (7)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m34 passed[39m[22m[90m (35)[39m
[2m   Start at [22m 19:20:07
[2m   Duration [22m 12.31s[2m (transform 4.28s, setup 4.80s, import 1.44s, tests 8.59s, environment 16.29s)[22m

